<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Top Level Namespace
  
    &mdash; Documentation by YARD 0.9.14
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index</a> &raquo;
    
    
    <span class="title">Top Level Namespace</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Top Level Namespace
  
  
  
</h1>
<div class="box_info">
  

  
  
  
  
  

  

  
</div>

<h2>Defined Under Namespace</h2>
<p class="children">
  
    
      <strong class="modules">Modules:</strong> <span class='object_link'><a href="Automodel.html" title="Automodel (module)">Automodel</a></span>
    
  
    
  
</p>







  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#automodel-instance_method" title="#automodel (instance method)">#<strong>automodel</strong>(spec)  &#x21d2; ActiveRecord::Base </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The main (really <em>only</em>) entrypoint for the
<strong>automodel-sqlserver</strong> gem.</p>
</div></span>
  
</li>

      
    </ul>
  



  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="automodel-instance_method">
  
    #<strong>automodel</strong>(spec)  &#x21d2; <tt>ActiveRecord::Base</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>The main (really <em>only</em>) entrypoint for the
<strong>automodel-sqlserver</strong> gem. This is the method the end-user
calls to trigger a database scrape and model generation.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>spec</span>
      
      
        <span class='type'>(<tt>Symbol</tt>, <tt>String</tt>, <tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The Symbol/String/Hash to pass through to the ActiveRecord connection
resolver, as detailed in <a
href="http://bit.ly/2JQdA8c">ActiveRecord::ConnectionHandling#establish_connection</a>.
Whether the given “spec” value is a Hash or is a Symbol/String to run
through the ActiveRecord resolver, the resulting Hash may include the
following options (in addition to the actual connection parameters).</p>
</div>
      
    </li>
  
</ul>

  
    
    
    <p class="tag_title">Options Hash (<tt>spec</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">:subschema</span>
          <span class="type">(<tt>String</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>The name of an additional namespace with which tables in the target
database are prefixed. Intended for use with SQL Server, where a
table&#39;s fully-qualified name may have an additional level of
namespacing between the database name and the base table name (e.g.
<code>database.dbo.table</code>, in which case the subschema would be
<code>&quot;dbo&quot;</code>).</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:namespace</span>
          <span class="type">(<tt>String</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>A String representing the desired namespace for the generated model classes
(e.g. <code>&quot;NewDB&quot;</code> or
<code>&quot;WeirdDB::Models&quot;</code>). If not given, the generated
models will fall under <code>Kernel</code> so they are always available
without namespacing, like standard user-defined model classes.</p>
</div>
          
        </li>
      
    </ul>
  

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>ActiveRecord::Base</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The returned value is an instance of an ActiveRecord::Base subclass. This
is the class that serves as superclass to all of the generated model
classes, so that a list of all models can be easily compiled by calling
<code>#subclasses</code> on this value.</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>Automodel::ModelNameCollisionError</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/automodel.rb', line 40</span>

<span class='kw'>def</span> <span class='id identifier rubyid_automodel'>automodel</span><span class='lparen'>(</span><span class='id identifier rubyid_spec'>spec</span><span class='rparen'>)</span>
  <span class='comment'>## Build out a connection spec Hash from the given value.
</span>  <span class='comment'>##
</span>  <span class='id identifier rubyid_resolver'>resolver</span> <span class='op'>=</span> <span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>ConnectionAdapters</span><span class='op'>::</span><span class='const'>ConnectionSpecification</span><span class='op'>::</span><span class='const'>Resolver</span>
  <span class='id identifier rubyid_connection_spec'>connection_spec</span> <span class='op'>=</span> <span class='id identifier rubyid_resolver'>resolver</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>Base</span><span class='period'>.</span><span class='id identifier rubyid_configurations'>configurations</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_resolve'>resolve</span><span class='lparen'>(</span><span class='id identifier rubyid_spec'>spec</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_symbolize_keys'>symbolize_keys</span>

  <span class='comment'>## We need a base class for all of the models we&#39;re about to create, but don&#39;t want to pollute
</span>  <span class='comment'>## ActiveRecord::Base&#39;s own connection pool, so we&#39;ll need a subclass. This will serve as both
</span>  <span class='comment'>## our base class for new models and as the connection pool handler. We&#39;re defining it with names
</span>  <span class='comment'>## that reflect both uses just to keep the code more legible.
</span>  <span class='comment'>##
</span>  <span class='id identifier rubyid_connection_handler_name'>connection_handler_name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>CH_</span><span class='embexpr_beg'>#{</span><span class='const'>SecureRandom</span><span class='period'>.</span><span class='id identifier rubyid_uuid'>uuid</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>-</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_base_class_for_new_models'>base_class_for_new_models</span> <span class='op'>=</span> <span class='id identifier rubyid_connection_handler'>connection_handler</span> <span class='op'>=</span> <span class='const'>Class</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>Base</span><span class='rparen'>)</span>
  <span class='const'><span class='object_link'><a href="Automodel.html" title="Automodel (module)">Automodel</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Automodel/Helpers.html" title="Automodel::Helpers (module)">Helpers</a></span></span><span class='period'>.</span><span class='id identifier rubyid_register_class'><span class='object_link'><a href="Automodel/Helpers.html#register_class-class_method" title="Automodel::Helpers.register_class (method)">register_class</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_connection_handler'>connection_handler</span><span class='comma'>,</span> <span class='label'>as:</span> <span class='id identifier rubyid_connection_handler_name'>connection_handler_name</span><span class='comma'>,</span>
                                                        <span class='label'>within:</span> <span class='symbol'>:&#39;Automodel::Connectors&#39;</span><span class='rparen'>)</span>

  <span class='comment'>## Establish a connection with the given params.
</span>  <span class='comment'>##
</span>  <span class='id identifier rubyid_connection_handler'>connection_handler</span><span class='period'>.</span><span class='id identifier rubyid_establish_connection'>establish_connection</span><span class='lparen'>(</span><span class='id identifier rubyid_connection_spec'>connection_spec</span><span class='rparen'>)</span>

  <span class='comment'>## Map out the table structures.
</span>  <span class='comment'>##
</span>  <span class='id identifier rubyid_tables'>tables</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Automodel.html" title="Automodel (module)">Automodel</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Automodel/Helpers.html" title="Automodel::Helpers (module)">Helpers</a></span></span><span class='period'>.</span><span class='id identifier rubyid_map_tables'><span class='object_link'><a href="Automodel/Helpers.html#map_tables-class_method" title="Automodel::Helpers.map_tables (method)">map_tables</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_connection_handler'>connection_handler</span><span class='comma'>,</span> <span class='label'>subschema:</span> <span class='id identifier rubyid_connection_spec'>connection_spec</span><span class='lbracket'>[</span><span class='symbol'>:subschema</span><span class='rbracket'>]</span><span class='rparen'>)</span>

  <span class='comment'>## Safeguard against class name collisions.
</span>  <span class='comment'>##
</span>  <span class='id identifier rubyid_defined_names'>defined_names</span> <span class='op'>=</span> <span class='const'>Array</span><span class='lparen'>(</span><span class='lparen'>(</span><span class='id identifier rubyid_connection_spec'>connection_spec</span><span class='lbracket'>[</span><span class='symbol'>:namespace</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='symbol'>:Kernel</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_safe_constantize'>safe_constantize</span><span class='op'>&amp;.</span><span class='id identifier rubyid_constants'>constants</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_potential_names'>potential_names</span> <span class='op'>=</span> <span class='id identifier rubyid_tables'>tables</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_table'>table</span><span class='op'>|</span> <span class='id identifier rubyid_table'>table</span><span class='lbracket'>[</span><span class='symbol'>:model_name</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_name_collisions'>name_collisions</span> <span class='op'>=</span> <span class='id identifier rubyid_defined_names'>defined_names</span> <span class='op'>&amp;</span> <span class='id identifier rubyid_potential_names'>potential_names</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_name_collisions'>name_collisions</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
    <span class='id identifier rubyid_connection_handler'>connection_handler</span><span class='period'>.</span><span class='id identifier rubyid_connection_pool'>connection_pool</span><span class='period'>.</span><span class='id identifier rubyid_disconnect!'>disconnect!</span>
    <span class='const'><span class='object_link'><a href="Automodel.html" title="Automodel (module)">Automodel</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Automodel/Connectors.html" title="Automodel::Connectors (module)">Connectors</a></span></span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='symbol'>:remove_const</span><span class='comma'>,</span> <span class='id identifier rubyid_connection_handler_name'>connection_handler_name</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="Automodel.html" title="Automodel (module)">Automodel</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Automodel/NameCollisionError.html" title="Automodel::NameCollisionError (class)">NameCollisionError</a></span></span><span class='comma'>,</span> <span class='id identifier rubyid_name_collisions'>name_collisions</span>
  <span class='kw'>end</span>

  <span class='comment'>## Define the table models.
</span>  <span class='comment'>##
</span>  <span class='id identifier rubyid_tables'>tables</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_table'>table</span><span class='op'>|</span>
    <span class='id identifier rubyid_table'>table</span><span class='lbracket'>[</span><span class='symbol'>:model</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>Class</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_base_class_for_new_models'>base_class_for_new_models</span><span class='rparen'>)</span> <span class='kw'>do</span>
      <span class='comment'>## We can&#39;t assume table properties confom to any standard.
</span>      <span class='comment'>##
</span>      <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_table_name'>table_name</span> <span class='op'>=</span> <span class='id identifier rubyid_table'>table</span><span class='lbracket'>[</span><span class='symbol'>:name</span><span class='rbracket'>]</span>
      <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_primary_key'>primary_key</span> <span class='op'>=</span> <span class='id identifier rubyid_table'>table</span><span class='lbracket'>[</span><span class='symbol'>:primary_key</span><span class='rbracket'>]</span>

      <span class='comment'>## Don&#39;t allow `#find` for tables with a composite primary key.
</span>      <span class='comment'>##
</span>      <span class='kw'>def</span> <span class='id identifier rubyid_find'>find</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="Automodel.html" title="Automodel (module)">Automodel</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Automodel/FindOnCompoundPrimaryKeyError.html" title="Automodel::FindOnCompoundPrimaryKeyError (class)">FindOnCompoundPrimaryKeyError</a></span></span> <span class='kw'>if</span> <span class='id identifier rubyid_table'>table</span><span class='lbracket'>[</span><span class='symbol'>:composite_primary_key</span><span class='rbracket'>]</span>
        <span class='kw'>super</span>
      <span class='kw'>end</span>

      <span class='comment'>## Create railsy column name aliases whenever possible.
</span>      <span class='comment'>##
</span>      <span class='id identifier rubyid_table'>table</span><span class='lbracket'>[</span><span class='symbol'>:columns</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_column'>column</span><span class='op'>|</span>
        <span class='id identifier rubyid_railsy_name'>railsy_name</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Automodel.html" title="Automodel (module)">Automodel</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Automodel/Helpers.html" title="Automodel::Helpers (module)">Helpers</a></span></span><span class='period'>.</span><span class='id identifier rubyid_railsy_column_name'><span class='object_link'><a href="Automodel/Helpers.html#railsy_column_name-class_method" title="Automodel::Helpers.railsy_column_name (method)">railsy_column_name</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_column'>column</span><span class='rparen'>)</span>
        <span class='kw'>unless</span> <span class='id identifier rubyid_table'>table</span><span class='lbracket'>[</span><span class='symbol'>:column_aliases</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_key?'>key?</span> <span class='id identifier rubyid_railsy_name'>railsy_name</span>
          <span class='id identifier rubyid_table'>table</span><span class='lbracket'>[</span><span class='symbol'>:column_aliases</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_railsy_name'>railsy_name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_column'>column</span>
          <span class='id identifier rubyid_alias_attribute'>alias_attribute</span><span class='lparen'>(</span><span class='id identifier rubyid_railsy_name'>railsy_name</span><span class='comma'>,</span> <span class='id identifier rubyid_column'>column</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='comment'>## Register the model class.
</span>    <span class='comment'>##
</span>    <span class='const'><span class='object_link'><a href="Automodel.html" title="Automodel (module)">Automodel</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Automodel/Helpers.html" title="Automodel::Helpers (module)">Helpers</a></span></span><span class='period'>.</span><span class='id identifier rubyid_register_class'><span class='object_link'><a href="Automodel/Helpers.html#register_class-class_method" title="Automodel::Helpers.register_class (method)">register_class</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_table'>table</span><span class='lbracket'>[</span><span class='symbol'>:model</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>as:</span> <span class='id identifier rubyid_table'>table</span><span class='lbracket'>[</span><span class='symbol'>:model_name</span><span class='rbracket'>]</span><span class='comma'>,</span>
                                                     <span class='label'>within:</span> <span class='id identifier rubyid_connection_spec'>connection_spec</span><span class='lbracket'>[</span><span class='symbol'>:namespace</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='comment'>## With all models registered, we can safely declare relationships.
</span>  <span class='comment'>##
</span>  <span class='id identifier rubyid_tables'>tables</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_table'>table</span><span class='op'>|</span> <span class='id identifier rubyid_table'>table</span><span class='lbracket'>[</span><span class='symbol'>:foreign_keys</span><span class='rbracket'>]</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_flatten'>flatten</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_fk'>fk</span><span class='op'>|</span>
    <span class='id identifier rubyid_from_table'>from_table</span> <span class='op'>=</span> <span class='id identifier rubyid_tables'>tables</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_table'>table</span><span class='op'>|</span> <span class='id identifier rubyid_table'>table</span><span class='lbracket'>[</span><span class='symbol'>:base_name</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='id identifier rubyid_fk'>fk</span><span class='period'>.</span><span class='id identifier rubyid_from_table'>from_table</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&quot;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='rbrace'>}</span>
    <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_from_table'>from_table</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>

    <span class='id identifier rubyid_to_table'>to_table</span> <span class='op'>=</span> <span class='id identifier rubyid_tables'>tables</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_table'>table</span><span class='op'>|</span> <span class='id identifier rubyid_table'>table</span><span class='lbracket'>[</span><span class='symbol'>:base_name</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='id identifier rubyid_fk'>fk</span><span class='period'>.</span><span class='id identifier rubyid_to_table'>to_table</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&quot;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='rbrace'>}</span>
    <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_to_table'>to_table</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>

    <span class='id identifier rubyid_association_setup'>association_setup</span> <span class='op'>=</span> <span class='heredoc_beg'>&lt;&lt;~END_OF_HEREDOC</span>
<span class='tstring_content'>      belongs_to </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_to_table'>to_table</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_base_name'>base_name</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'>,
</span><span class='tstring_content'>                 class_name: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_to_table'>to_table</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_model'>model</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'>,
</span><span class='tstring_content'>                 primary_key: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_fk'>fk</span><span class='period'>.</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_primary_key'>primary_key</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'>,
</span><span class='tstring_content'>                 foreign_key: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_fk'>fk</span><span class='period'>.</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_column'>column</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'>
</span><span class='tstring_content'>
</span><span class='tstring_content'>      alias </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_to_table'>to_table</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_model_name'>model_name</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_underscore'>underscore</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_to_table'>to_table</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_base_name'>base_name</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'>
</span><span class='heredoc_end'>    END_OF_HEREDOC
</span>    <span class='id identifier rubyid_from_table'>from_table</span><span class='lbracket'>[</span><span class='symbol'>:model</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_class_eval'>class_eval</span><span class='lparen'>(</span><span class='id identifier rubyid_association_setup'>association_setup</span><span class='comma'>,</span> <span class='kw'>__FILE__</span><span class='comma'>,</span> <span class='kw'>__LINE__</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='comment'>## There&#39;s no obvious value we can return that would be of any use, except maybe the base class,
</span>  <span class='comment'>## in case the end user wants to procure a list of all the models (via `#subclasses`).
</span>  <span class='comment'>##
</span>  <span class='id identifier rubyid_base_class_for_new_models'>base_class_for_new_models</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Wed Jun 20 18:16:10 2018 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.14 (ruby-2.4.4).
</div>

    </div>
  </body>
</html>